

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dowhy.causal_estimators.instrumental_variable_estimator &mdash; DoWhy | Making Causal Inference Easy  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> DoWhy | Making Causal Inference Easy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../readme.html">DoWhy | 让因果推断容易</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_simple_example.html">DoWhy:一个简单例子</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_confounder_example.html">相关性还是因果效应？</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_estimation_methods.html">DoWhy: 因果效应估计方法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy-conditional-treatment-effects.html">用 DoWhy 和 EconML 估计条件平均因果效应</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_causal_api.html">DoWhy 因果 API Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/do_sampler_demo.html">Do-sampler 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/load_graph_example.html">Different ways to load an input graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy-simple-iv-example.html">工具变量法估计因果效应</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_ihdp_data_example.html">IHDP 因果效应估计</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/dowhy_lalonde_example.html">Lalonde 数据集上因果推断</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_notebooks/lalonde_pandas_api.html">Lalonde Pandas API Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code_repo.html">Code repository &amp; Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dowhy.html">dowhy package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">DoWhy | Making Causal Inference Easy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../causal_estimators.html">dowhy.causal_estimators</a> &raquo;</li>
        
      <li>dowhy.causal_estimators.instrumental_variable_estimator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for dowhy.causal_estimators.instrumental_variable_estimator</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">sympy.stats</span> <span class="k">as</span> <span class="nn">spstats</span>
<span class="kn">from</span> <span class="nn">statsmodels.sandbox.regression.gmm</span> <span class="k">import</span> <span class="n">IV2SLS</span>

<span class="kn">from</span> <span class="nn">dowhy.causal_estimator</span> <span class="k">import</span> <span class="n">CausalEstimate</span>
<span class="kn">from</span> <span class="nn">dowhy.causal_estimator</span> <span class="k">import</span> <span class="n">CausalEstimator</span>
<span class="kn">from</span> <span class="nn">dowhy.causal_estimator</span> <span class="k">import</span> <span class="n">RealizedEstimand</span>
<span class="kn">from</span> <span class="nn">dowhy.utils.api</span> <span class="k">import</span> <span class="n">parse_state</span>


<div class="viewcode-block" id="InstrumentalVariableEstimator"><a class="viewcode-back" href="../../../dowhy.causal_estimators.html#dowhy.causal_estimators.instrumental_variable_estimator.InstrumentalVariableEstimator">[docs]</a><span class="k">class</span> <span class="nc">InstrumentalVariableEstimator</span><span class="p">(</span><span class="n">CausalEstimator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute effect of treatment using the instrumental variables method.</span>

<span class="sd">    This is also a superclass that can be inherited by other specific methods.</span>


<span class="sd">    Supports additional parameters that can be specified in the estimate_effect() method.</span>

<span class="sd">    - &#39;iv_instrument_name&#39;: Name of the specific instrumental variable to be used. Needs to be one of the IVs identified in the identification step. Default is to use all the IV variables from the identification step.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Instrumental Variables used:&quot;</span> <span class="o">+</span>
                          <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_estimand</span><span class="o">.</span><span class="n">instrumental_variables</span><span class="p">))</span>


        <span class="c1"># choosing the instrumental variable to use</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;iv_instrument_name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_estimand</span><span class="o">.</span><span class="n">instrumental_variables</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span> <span class="o">=</span> <span class="n">parse_state</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iv_instrument_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No valid instruments found. IV Method not applicable&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">):</span>
            <span class="c1"># TODO move this to the identification step</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Number of instruments fewer than number of treatments. 2SLS requires at least as many instruments as treatments.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_estimating_instruments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;INFO: Using Instrumental Variable Estimator&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">symbolic_estimator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_symbolic_estimator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_estimand</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbolic_estimator</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_estimate_effect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">instrument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_estimating_instruments</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Instrument Variable values: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">instrument</span><span class="p">))</span>
            <span class="n">num_unique_values</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">instrument</span><span class="p">))</span>
            <span class="n">instrument_is_binary</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_unique_values</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">instrument_is_binary</span><span class="p">:</span>
                <span class="c1"># Obtain estimate by Wald Estimator</span>
                <span class="n">y1_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">[</span><span class="n">instrument</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">y0_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">[</span><span class="n">instrument</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">x1_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">instrument</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">x0_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">instrument</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">num</span> <span class="o">=</span> <span class="n">y1_z</span> <span class="o">-</span> <span class="n">y0_z</span>
                <span class="n">deno</span> <span class="o">=</span> <span class="n">x1_z</span> <span class="o">-</span> <span class="n">x0_z</span>
                <span class="n">iv_est</span> <span class="o">=</span> <span class="n">num</span> <span class="o">/</span> <span class="n">deno</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Obtain estimate by 2SLS estimator: Cov(y,z) / Cov(x,z)</span>
                <span class="n">num_yz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span> <span class="n">instrument</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">deno_xz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">instrument</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">iv_est</span> <span class="o">=</span> <span class="n">num_yz</span> <span class="o">/</span> <span class="n">deno_xz</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># More than 1 instrument. Use 2sls.</span>
            <span class="n">est_treatment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_treatment</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
            <span class="n">est_outcome</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
            <span class="n">ivmodel</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">est_outcome</span><span class="p">,</span> <span class="n">est_treatment</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_estimating_instruments</span><span class="p">)</span>
            <span class="n">reg_results</span> <span class="o">=</span> <span class="n">ivmodel</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">reg_results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
            <span class="n">iv_est</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">reg_results</span><span class="o">.</span><span class="n">params</span><span class="p">)</span> <span class="c1"># the effect is the same for any treatment value (assume treatment goes from 0 to 1)</span>
        <span class="n">estimate</span> <span class="o">=</span> <span class="n">CausalEstimate</span><span class="p">(</span><span class="n">estimate</span><span class="o">=</span><span class="n">iv_est</span><span class="p">,</span>
                                  <span class="n">target_estimand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_estimand</span><span class="p">,</span>
                                  <span class="n">realized_estimand_expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">symbolic_estimator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">estimate</span>

<div class="viewcode-block" id="InstrumentalVariableEstimator.construct_symbolic_estimator"><a class="viewcode-back" href="../../../dowhy.causal_estimators.html#dowhy.causal_estimators.instrumental_variable_estimator.InstrumentalVariableEstimator.construct_symbolic_estimator">[docs]</a>    <span class="k">def</span> <span class="nf">construct_symbolic_estimator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">estimand</span><span class="p">):</span>
        <span class="n">sym_outcome</span> <span class="o">=</span> <span class="p">(</span><span class="n">spstats</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">estimand</span><span class="o">.</span><span class="n">outcome_variable</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">sym_treatment</span> <span class="o">=</span> <span class="p">(</span><span class="n">spstats</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">estimand</span><span class="o">.</span><span class="n">treatment_variable</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">sym_instrument</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">estimating_instrument_names</span><span class="p">))</span>
        <span class="n">sym_outcome_derivative</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Derivative</span><span class="p">(</span><span class="n">sym_outcome</span><span class="p">,</span> <span class="n">sym_instrument</span><span class="p">)</span>
        <span class="n">sym_treatment_derivative</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Derivative</span><span class="p">(</span><span class="n">sym_treatment</span><span class="p">,</span> <span class="n">sym_instrument</span><span class="p">)</span>
        <span class="n">sym_effect</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">spstats</span><span class="o">.</span><span class="n">Expectation</span><span class="p">(</span><span class="n">sym_outcome_derivative</span><span class="p">)</span> <span class="o">/</span>
                <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">Expectation</span><span class="p">(</span><span class="n">sym_treatment_derivative</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">estimator_assumptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;treatment_effect_homogeneity&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;Each unit&#39;s treatment </span><span class="si">{0}</span><span class="s2"> is &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">)</span> <span class="o">+</span>
                <span class="s2">&quot;affected in the same way by common causes of &quot;</span>
                <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> and </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome_name</span><span class="p">)</span>
            <span class="p">),</span>
            <span class="s2">&quot;outcome_effect_homogeneity&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;Each unit&#39;s outcome </span><span class="si">{0}</span><span class="s2"> is &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome_name</span><span class="p">)</span> <span class="o">+</span>
                <span class="s2">&quot;affected in the same way by common causes of &quot;</span>
                <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> and </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_treatment_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outcome_name</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="p">}</span>
        <span class="n">sym_assumptions</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">estimand</span><span class="o">.</span><span class="n">estimands</span><span class="p">[</span><span class="s2">&quot;iv&quot;</span><span class="p">][</span><span class="s2">&quot;assumptions&quot;</span><span class="p">],</span>
                           <span class="o">**</span><span class="n">estimator_assumptions</span><span class="p">}</span>

        <span class="n">symbolic_estimand</span> <span class="o">=</span> <span class="n">RealizedEstimand</span><span class="p">(</span><span class="n">estimand</span><span class="p">,</span>
                                             <span class="n">estimator_name</span><span class="o">=</span><span class="s2">&quot;Wald Estimator&quot;</span><span class="p">)</span>
        <span class="n">symbolic_estimand</span><span class="o">.</span><span class="n">update_assumptions</span><span class="p">(</span><span class="n">sym_assumptions</span><span class="p">)</span>
        <span class="n">symbolic_estimand</span><span class="o">.</span><span class="n">update_estimand_expression</span><span class="p">(</span><span class="n">sym_effect</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">symbolic_estimand</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Microsoft

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>